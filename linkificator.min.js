$.extend($.expr[":"],{inView:function(a){var b=document.documentElement.scrollTop||document.body.scrollTop,c=$(a).offset().top,d=window.innerHeight&&window.innerHeight<$(window).height()?window.innerHeight:$(window).height();return c>b&&$(a).height()+c<b+d}});(function(a){var b=/(\b(http|https):(\\\/\\\/|\/\/)[-A-Z0-9+&@#\\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\\/%=~_|])/ig;var c=/\\/g;var d=function(a){var b="{<ul>";jQuery.each(a,function(a,c){if(typeof c=="object"){c=d(c)}b+="<li><strong>"+a+"</strong>: "+c+"</li>"});b+="</ul>}";return b};var e=function(){var e="bottom";var f;if($.browser.webkit){f=$("body")}else{f=$("html")}if(Math.abs(f.scrollTop()+$(a).height()-$("body").height())>1){e="middle"}var g=$(".message:inView:first").parent();var h=false;$("li.event .message").each(function(a,e){var f=$(e);if(jQuery.data(e,"paperTrailLinkificatorProcessed")){return true}try{var g=jQuery.parseJSON(f.html())}catch(j){}if(g){h=true;var k=d(g);f.html(k)}var l=f.html().match(b);if(l){for(i=0;i<l.length;i++){var m=l[i];var n=m.replace(c,"");f.html(f.html().replace(m,'<a href="'+n+'" target="_blank">'+n+"</a>"))}}jQuery.data(e,"paperTrailLinkificatorProcessed",true)});if(h){if(e=="bottom"){f.scrollTop($("body").height())}else{f.scrollTop(g.offset().top-53)}}};e();if(!a.paperTrailLinkificatorBookmarkletRunning){a.paperTrailLinkificatorBookmarkletRunning=true;a.setInterval(function(){e()},5e3)}})(window);